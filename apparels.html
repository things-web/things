<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Apparels - Things.in</title>
<link rel="stylesheet" href="css/style.css">

<style>
/* NAV */
.cart-icon{
  position:relative;
  text-decoration:none;
  font-size:20px;
}
.cart-count{
  position:absolute;
  top:-8px;
  right:-10px;
  background:#0a1f44;
  color:white;
  font-size:12px;
  padding:2px 6px;
  border-radius:50%;
}

/* ADD TO CART BUTTON CENTERED */
.cart-action {
  margin-top: 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
}
.add-cart-btn {
  background: #0a1f44;
  color: white;
  border: none;
  padding: 8px 14px;
  cursor: pointer;
  font-size: 14px;
  border-radius: 4px;
  transition: 0.3s;
}
.add-cart-btn:hover {
  opacity: 0.85;
}
.added-msg {
  color: black;
  font-size: 14px;
  opacity: 0;
  transition: opacity 0.4s ease;
}
</style>
</head>

<body>

<nav>
  <div class="logo">Things.in</div>
  <div class="nav-links">
    <a href="accessories.html">Accessories</a>
    <a href="cart.html" class="cart-icon">ðŸ›’<span class="cart-count" id="cart-count">0</span></a>
  </div>
</nav>

<section class="store-grid">

  <!-- Product List -->
  <script>
    const products = [
      {name:"Anime Printed Tshirt", price:449, img:"images/apparels/animetshirt.jpg"},
      {name:"Black Korean Pant", price:559, img:"images/apparels/blackkoreanpant.jpg"},
      {name:"Blue Sundress", price:799, img:"images/apparels/bluesundress.png"},
      {name:"Brown Korean Pant", price:559, img:"images/apparels/brownkoreanpant.jpg"},
      {name:"Cream Korean Pants", price:559, img:"images/apparels/creamkoreanpants.jpg"},
      {name:"Grey Bonkers Track", price:699, img:"images/apparels/greybonkerstrack.jpg"},
      {name:"Light Blue Jeans", price:559, img:"images/apparels/lightbluejean.jpg"},
      {name:"Red Sundress", price:799, img:"images/apparels/redsundress.png"},
      {name:"Washed Out Jeans", price:559, img:"images/apparels/washedoutjeans.png"},
      {name:"White Bonkers Track", price:699, img:"images/apparels/whitebonkerstrack.png"},
      {name:"Yellow Sundress", price:799, img:"images/apparels/yellowsundress.jpg"}
    ];

    const container = document.currentScript.parentElement;
    products.forEach(p => {
      const div = document.createElement("div");
      div.className = "product-card";
      div.innerHTML = `
        <div class="image-frame">
          <img src="${p.img}" alt="${p.name}">
        </div>
        <div class="cart-action">
          <button class="add-cart-btn" onclick="addToCart(this,'${p.name}',${p.price},'${p.img}')">Add to Cart</button>
          <span class="added-msg">Added!</span>
        </div>
        <h3>${p.name}</h3>
        <p class="price">â‚¹${p.price}</p>
      `;
      container.appendChild(div);
    });
  </script>

</section>

<script>
/* CART SYSTEM */
function getCart(){return JSON.parse(localStorage.getItem("cart"))||[];}
function saveCart(cart){localStorage.setItem("cart",JSON.stringify(cart));updateCount();}
function updateCount(){const cart=getCart();let totalQty=0;cart.forEach(i=>totalQty+=Number(i.qty||0));document.getElementById("cart-count").innerText=totalQty;}

/* ADD TO CART WITH FADE */
function addToCart(btn,name,price,img){
  price=Number(price);
  let cart=getCart();
  let item=cart.find(p=>p.name===name);
  if(item){item.qty=Number(item.qty)+1;}
  else{cart.push({name,price,img,qty:1});}
  saveCart(cart);

  // Show "Added!" message
  const msg = btn.nextElementSibling;
  msg.style.opacity = 1;
  setTimeout(()=>{ msg.style.opacity = 0; }, 1200);
}

updateCount();
</script>

</body>
</html>
