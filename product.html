<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Product - Things.in</title>
<link rel="stylesheet" href="css/style.css">

<style>
.product-container{
  max-width:420px;
  margin:40px auto;
  display:flex;
  flex-direction:column;
  align-items:center;
  text-align:center;
}

.image-frame{
  width:100%;
  aspect-ratio:1/1;
  overflow:hidden;
  position:relative;
  margin-bottom:15px;
}

.slider{width:100%;height:100%;overflow:hidden;}
.slide-track{display:flex;height:100%;transition:transform .4s ease;}
.slide-track img{width:100%;height:100%;object-fit:cover;flex-shrink:0;}

.slide-btn{
  position:absolute;top:50%;transform:translateY(-50%);
  background:rgba(0,0,0,.25);
  border:none;color:white;font-size:18px;
  padding:6px 10px;cursor:pointer;border-radius:50%;
}
.prev{left:5px;} .next{right:5px;}

h2{margin:8px 0 4px;}
.price{margin-bottom:10px;}

.size-options,.color-blocks{
  display:flex;justify-content:center;gap:10px;margin-bottom:12px;
}

.size-block{
  padding:5px 12px;border:1px solid #0a1f44;border-radius:4px;cursor:pointer;
}
.size-block.selected{background:#0a1f44;color:white;}

.color-block{width:20px;height:20px;border-radius:4px;cursor:pointer;border:1px solid #ccc;}
.color-block.selected{border:2px solid black;}
.yellow{background:yellow;} .grey{background:grey;}

.cart-action{
  display:flex;flex-direction:column;align-items:center;gap:6px;margin-top:10px;width:100%;
}

.add-cart-btn{
  padding:8px 16px;
  border:1px solid #0a1f44;
  background:white;
  color:#0a1f44;
  font-size:14px;
  cursor:pointer;
  border-radius:4px;
  width:180px;
}

.added-msg{
  font-size:12px;background:black;color:white;
  padding:3px 10px;border-radius:3px;opacity:0;transition:opacity .3s;
}
.added-msg.show{opacity:1;}
</style>
</head>

<body>

<nav>
  <a href="index.html" class="logo">Things.in</a>

  <div class="nav-links">
    <a href="apparels.html">Apparels</a>
    <a href="accessories.html">Accessories</a>
    <a href="cart.html" class="cart-icon">
      ðŸ›’<span class="cart-count" id="cart-count">0</span>
    </a>
  </div>
</nav>

<div class="product-container">
  <div class="image-frame">
    <div class="slider">
      <div class="slide-track" id="productTrack"></div>
      <button class="slide-btn prev" onclick="moveSlide(-1)">â€¹</button>
      <button class="slide-btn next" onclick="moveSlide(1)">â€º</button>
    </div>
  </div>

  <h2 id="productName"></h2>
  <p class="price" id="productPrice"></p>

  <div id="sizeOptions" class="size-options"></div>
  <div id="colorOptions" class="color-blocks"></div>

  <div class="cart-action">
    <button class="add-cart-btn" onclick="addToCartBtn()">Add to Cart</button>
    <span class="added-msg">Added!</span>
  </div>
</div>

<script>
const products = {

/* APPARELS */
'anime-tshirt':{type:'apparel',name:'Oversized Anime Printed Tshirt',price:449,images:['images/apparels/animetshirt.jpg'],sizes:['S','M','L','XL']},
'black-pant':{type:'apparel',name:'Black Korean Pants',price:559,images:['images/apparels/blackkoreanpant.jpg'],sizes:['S','M','L','XL']},
'brown-pant':{type:'apparel',name:'Brown Korean Pants',price:559,images:['images/apparels/brownkoreanpant.jpg'],sizes:['S','M','L','XL']},
'cream-pant':{type:'apparel',name:'Cream Korean Pants',price:559,images:['images/apparels/creamkoreanpants.jpg'],sizes:['S','M','L','XL']},
'light-jeans':{type:'apparel',name:'Light Blue Jeans',price:559,images:['images/apparels/lightbluejean.jpg'],sizes:['S','M','L','XL']},
'washed-jeans':{type:'apparel',name:'Washed Out Jeans',price:559,images:['images/apparels/washedoutjeans.png'],sizes:['S','M','L','XL']},
'white-track':{type:'apparel',name:'White Bonkers Track',price:699,images:['images/apparels/whitebonkerstrack.png'],sizes:['S','M','L','XL']},
'grey-track':{type:'apparel',name:'Grey Bonkers Track',price:699,images:['images/apparels/greybonkerstrack.jpg'],sizes:['S','M','L','XL']},
'yellow-sundress':{type:'apparel',name:'Yellow Sundress',price:799,images:['images/apparels/yellowsundress.jpg'],sizes:['S','M','L','XL']},
'red-sundress':{type:'apparel',name:'Red Sundress',price:799,images:['images/apparels/redsundress.png'],sizes:['S','M','L','XL']},
'blue-sundress':{type:'apparel',name:'Blue Sundress',price:799,images:['images/apparels/bluesundress.png'],sizes:['S','M','L','XL']},

/* ACCESSORY */
'pandabottle':{
  type:'accessory',
  name:'Panda Bottle',
  price:399,
  images:{
    grey:['images/accessories/pandabottle1.png','images/accessories/pandabottle2.png'],
    yellow:['images/accessories/pandabottle3.png','images/accessories/pandabottle4.png']
  },
  colors:['grey','yellow']
}

};

const id=new URLSearchParams(window.location.search).get('id');
const product=products[id];
const track=document.getElementById('productTrack');
const sizeEl=document.getElementById('sizeOptions');
const colorEl=document.getElementById('colorOptions');

let currentIndex=0,currentColor=null;

function init(){
document.getElementById('productName').innerText=product.name;
document.getElementById('productPrice').innerText='â‚¹'+product.price;

if(product.type==='apparel'){
product.images.forEach(src=>{const img=document.createElement('img');img.src=src;track.appendChild(img);});
product.sizes.forEach(s=>{
const b=document.createElement('div');b.className='size-block';b.innerText=s;
b.onclick=()=>{document.querySelectorAll('.size-block').forEach(x=>x.classList.remove('selected'));b.classList.add('selected');};
sizeEl.appendChild(b);
});
}

if(product.type==='accessory'){
currentColor=product.colors[0];
product.colors.forEach(c=>{
const b=document.createElement('div');b.className='color-block '+c;
if(c===currentColor)b.classList.add('selected');
b.onclick=()=>switchColor(c);
colorEl.appendChild(b);
});
loadColorImages(currentColor);
}
}

function loadColorImages(color){
track.innerHTML='';
product.images[color].forEach(src=>{const img=document.createElement('img');img.src=src;track.appendChild(img);});
}

function moveSlide(d){
currentIndex+=d;
if(currentIndex<0)currentIndex=track.children.length-1;
if(currentIndex>=track.children.length)currentIndex=0;
track.style.transform=`translateX(-${currentIndex*100}%)`;
}

function switchColor(c){
currentColor=c;
document.querySelectorAll('.color-block').forEach(x=>x.classList.remove('selected'));
document.querySelector('.'+c).classList.add('selected');
loadColorImages(c);
}

function getCart(){return JSON.parse(localStorage.getItem("cart"))||[];}
function saveCart(c){localStorage.setItem("cart",JSON.stringify(c));updateCount();}
function updateCount(){let t=0;getCart().forEach(i=>t+=i.qty);document.getElementById("cart-count").innerText=t;}

function addToCartBtn(){
let cart=getCart();
let img=product.type==='apparel'?product.images[0]:product.images[currentColor][0];
let size=document.querySelector('.size-block.selected')?.innerText||null;
let item=cart.find(p=>p.name===product.name&&p.size===size&&p.color===currentColor);
if(item)item.qty++;else cart.push({name:product.name,price:product.price,img,qty:1,size,color:currentColor});
saveCart(cart);
const m=document.querySelector('.added-msg');m.classList.add('show');setTimeout(()=>m.classList.remove('show'),900);
}

init();updateCount();
</script>
</body>
</html>
